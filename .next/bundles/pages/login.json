{"component":"module.exports =\nwebpackJsonp([4],{\n\n/***/ 473:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, __resourceQuery) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(16);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(13);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(14);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(19);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(18);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _layout = __webpack_require__(214);\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _store = __webpack_require__(217);\n\nvar _nextReduxWrapper = __webpack_require__(195);\n\nvar _nextReduxWrapper2 = _interopRequireDefault(_nextReduxWrapper);\n\nvar _reactIntl = __webpack_require__(57);\n\nvar _loginForm = __webpack_require__(876);\n\nvar _loginForm2 = _interopRequireDefault(_loginForm);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = 'E:\\\\NewWorks\\\\work_react\\\\ReactNextBoilerplate\\\\pages\\\\login.js?entry';\n\n\nvar Login = function (_Component) {\n    (0, _inherits3.default)(Login, _Component);\n\n    function Login() {\n        (0, _classCallCheck3.default)(this, Login);\n\n        return (0, _possibleConstructorReturn3.default)(this, (Login.__proto__ || (0, _getPrototypeOf2.default)(Login)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(Login, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                lang = _props.lang,\n                userInfo = _props.userInfo;\n\n            console.log('login-> lang -> the user:', lang, userInfo, userInfo !== undefined);\n            var hello = lang === \"zh\" ? userInfo.userName + \"您好\" : \"Hello \" + userInfo.userName;\n            var verify = lang === \"zh\" ? \"系统验证\" : \"Verification\";\n            var welcome = lang === \"zh\" ? \"验证通过，欢迎回来！\" : \"Welcome back\";\n            var needVerify = lang === \"zh\" ? \"请输入用户名密码进行验证\" : \"Please input user name and password\";\n\n            var loggedIn = userInfo !== undefined && userInfo.userId > 0;\n            var title = loggedIn ? hello : verify;\n            var subTitle = loggedIn ? welcome : needVerify;\n\n            console.log('Login->loggedIn,title,subTitle:', loggedIn, title, subTitle);\n\n            var renderLogin = function renderLogin() {\n                if (loggedIn) {\n                    return _react2.default.createElement('div', {\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 27\n                        }\n                    }, _react2.default.createElement(_reactIntl.FormattedMessage, { id: 'currentUser', __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 27\n                        }\n                    }), ' : ', userInfo.userName, ' ');\n                }\n                return _react2.default.createElement(_loginForm2.default, {\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 30\n                    }\n                });\n            };\n            return _react2.default.createElement(_layout2.default, { title: title, subTitle: subTitle, breadcrumb: 'Login', __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 34\n                }\n            }, renderLogin());\n        }\n    }]);\n\n    return Login;\n}(_react.Component);\n\nexports.default = (0, _nextReduxWrapper2.default)(_store.initStore, function (state) {\n    console.log('login->state:', state);\n    return state;\n})(Login);\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"E:\\\\NewWorks\\\\work_react\\\\ReactNextBoilerplate\\\\pages\\\\login.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"E:\\\\NewWorks\\\\work_react\\\\ReactNextBoilerplate\\\\pages\\\\login.js\"); } } })();\n    (function (Component, route) {\n      if (false) return\n      if (false) return\n\n      var qs = __webpack_require__(55)\n      var params = qs.parse(__resourceQuery.slice(1))\n      if (params.entry == null) return\n\n      module.hot.accept()\n      Component.__route = route\n\n      if (module.hot.status() === 'idle') return\n\n      var components = next.router.components\n      for (var r in components) {\n        if (!components.hasOwnProperty(r)) continue\n\n        if (components[r].Component.__route === route) {\n          next.router.update(r, Component)\n        }\n      }\n    })(module.exports.default || module.exports, \"/login\")\n  \n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0), \"?entry\"))\n\n/***/ }),\n\n/***/ 876:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(16);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(13);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(14);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(19);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(18);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(5);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(92);\n\nvar _reactIntl = __webpack_require__(57);\n\nvar _loginAPI = __webpack_require__(450);\n\nvar _loginAPI2 = _interopRequireDefault(_loginAPI);\n\nvar _InputEx = __webpack_require__(451);\n\nvar _InputEx2 = _interopRequireDefault(_InputEx);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = 'E:\\\\NewWorks\\\\work_react\\\\ReactNextBoilerplate\\\\components\\\\loginForm.js';\n\n\nvar LoginForm = function (_Component) {\n    (0, _inherits3.default)(LoginForm, _Component);\n\n    function LoginForm(props) {\n        (0, _classCallCheck3.default)(this, LoginForm);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LoginForm.__proto__ || (0, _getPrototypeOf2.default)(LoginForm)).call(this, props));\n\n        _this.onLogin = _this.onLogin.bind(_this);\n        _this.onLogout = _this.onLogout.bind(_this);\n        return _this;\n    }\n\n    (0, _createClass3.default)(LoginForm, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var userInfo = this.props.userInfo;\n            //console.log('loginForm.userInfo:', userInfo);\n\n            var renderMessage = function renderMessage() {\n                var _refs = _this2.refs,\n                    userNameEx = _refs.userNameEx,\n                    passwordEx = _refs.passwordEx;\n\n                if (userInfo === undefined || passwordEx === undefined) {\n                    return _react2.default.createElement(_reactIntl.FormattedMessage, { id: 'loginPrompt', __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 24\n                        }\n                    });\n                } else if (passwordEx !== undefined) {\n                    var password = passwordEx.refs.wrappedInstance.refs.password;\n\n                    password.value = '';\n                }\n\n                if (userNameEx !== undefined) {\n                    var userName = userNameEx.refs.wrappedInstance.refs.userName;\n\n                    userName.select();\n                }\n                return _react2.default.createElement(_reactIntl.FormattedMessage, { id: 'loginFailPrompt', __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 35\n                    }\n                });\n            };\n\n            var renderForm = function renderForm() {\n                if (userInfo !== undefined && userInfo.userId > 0) {\n                    //Already logged in\n                    return _react2.default.createElement('div', {\n                        __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 41\n                        }\n                    }, _react2.default.createElement('h1', { className: 'title', __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 42\n                        }\n                    }, _react2.default.createElement(_reactIntl.FormattedMessage, { id: 'loginSuccessTitle', values: { userName: userInfo.userName }, __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 42\n                        }\n                    })), _react2.default.createElement('button', { className: 'button expanded', onClick: _this2.onLogout, __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 43\n                        }\n                    }, _react2.default.createElement(_reactIntl.FormattedMessage, { id: 'logoutButton', __source: {\n                            fileName: _jsxFileName,\n                            lineNumber: 43\n                        }\n                    })));\n                }\n\n                //console.log('fail login:', userInfo);\n\n                return _react2.default.createElement('div', {\n                    __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 51\n                    }\n                }, _react2.default.createElement('h1', { className: 'title', __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 52\n                    }\n                }, _react2.default.createElement(_reactIntl.FormattedMessage, { id: 'loginTitle', __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 52\n                    }\n                })), _react2.default.createElement('form', { onSubmit: _this2.onLogin, __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 53\n                    }\n                }, _react2.default.createElement(_InputEx2.default, { locId: 'phUserName', ref: 'userNameEx', refName: 'userName', type: 'text', className: 'text', __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 54\n                    }\n                }), _react2.default.createElement(_InputEx2.default, { locId: 'phPassword', ref: 'passwordEx', refName: 'password', type: 'password', className: 'password', __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 55\n                    }\n                }), _react2.default.createElement(_InputEx2.default, { type: 'submit', className: 'button expanded', locId: 'loginButton', __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 56\n                    }\n                })), renderMessage());\n            };\n            return _react2.default.createElement('div', {\n                __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 63\n                }\n            }, renderForm());\n        }\n    }, {\n        key: 'onLogin',\n        value: function onLogin(e) {\n            e.preventDefault();\n            //console.log('login.props:',this.props);\n            //console.log(\"the state:\", this.refs.wrappedInstance);\n            var dispatch = this.props.dispatch;\n            var _refs2 = this.refs,\n                userNameEx = _refs2.userNameEx,\n                passwordEx = _refs2.passwordEx;\n            //console.log('userNameEx, passwordEx:', userNameEx, passwordEx);\n            //console.log('InputEx.refs:', userNameEx.value);\n\n            var userName = userNameEx.refs.wrappedInstance.refs.userName;\n            var password = passwordEx.refs.wrappedInstance.refs.password;\n\n            //console.log('userName:', userName.value)\n            //console.log('password:', password.value);\n\n            if (userName.value.length > 0 && password.value.length > 0) {\n                //console.log('try login')\n                dispatch(_loginAPI2.default.verifyUser(userName.value, password.value));\n            } else {\n                //console.log('login failed');\n                userName.focus();\n                password.value = \"\";\n            }\n        }\n    }, {\n        key: 'onLogout',\n        value: function onLogout(e) {\n            e.preventDefault();\n            //console.log('logout');\n            var dispatch = this.props.dispatch;\n\n            dispatch(_loginAPI2.default.logOut());\n        }\n    }]);\n\n    return LoginForm;\n}(_react.Component);\n\nexports.default = (0, _reactRedux.connect)(function (state) {\n    return state;\n})(LoginForm);\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"E:\\\\NewWorks\\\\work_react\\\\ReactNextBoilerplate\\\\components\\\\loginForm.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"E:\\\\NewWorks\\\\work_react\\\\ReactNextBoilerplate\\\\components\\\\loginForm.js\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 942:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(36);\nmodule.exports = __webpack_require__(473);\n\n\n/***/ })\n\n},[942]);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWdlcy9sb2dpbi5qcz82NTUwMzJhIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvbG9naW5Gb3JtLmpzPzY1NTAzMmEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdCOzs7O0FBQ0c7Ozs7QUFDSzs7QUFDakI7Ozs7QUFDQzs7QUFFYzs7Ozs7Ozs7O0lBRWhCOzs7Ozs7Ozs7OztpQ0FDTzt5QkFDa0IsS0FBSztnQkFBdkI7Z0JBQU0sa0JBRVg7O29CQUFRLElBQUksNkJBQTRCLE1BQU0sVUFBVSxhQUN4RDtnQkFBTSxRQUFRLFNBQVMsT0FBTSxTQUFTLFdBQVcsT0FBTSxXQUFXLFNBQ2xFO2dCQUFNLFNBQVMsU0FBUyxPQUFNLFNBQzlCO2dCQUFNLFVBQVUsU0FBUyxPQUFNLGVBQy9CO2dCQUFNLGFBQWEsU0FBUyxPQUFNLGlCQUVsQzs7Z0JBQUksV0FBWSxhQUFhLGFBQWEsU0FBUyxTQUNuRDtnQkFBSSxRQUFRLFdBQVcsUUFDdkI7Z0JBQUksV0FBVyxXQUFXLFVBRTFCOztvQkFBUSxJQUFJLG1DQUFrQyxVQUFVLE9BRXhEOztnQkFBSSxjQUFjLHVCQUNkO29CQUFHLFVBQ0M7MkNBQVE7O3NDQUFBO3dDQUFLO0FBQUw7QUFBQSx1Q0FBTSw2Q0FBaUIsSUFBRztzQ0FBckI7d0NBQUE7QUFBQTt3QkFBMEQsZ0JBQVMsVUFDbkY7QUFDRDt1Q0FDSzs7a0NBQUQ7b0NBRVA7QUFGTztBQUFBO0FBR1I7bUNBQ0ssa0NBQU8sT0FBTyxPQUFPLFVBQVUsVUFBVSxZQUFXOzhCQUFyRDtnQ0FDSztBQURMO2FBQUEsRUFJUDs7Ozs7QUFHTDs7b0VBQW1DLFVBQUMsT0FDaEM7WUFBUSxJQUFJLGlCQUNaO1dBQ0g7QUFIYyxDQUFVLEVBR3RCLE87Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNDdUI7Ozs7QUFDbEI7O0FBQ0E7O0FBRWE7Ozs7QUFDRDs7Ozs7Ozs7O0lBRWQ7dUNBQ0Y7O3VCQUFZLE9BQU87NENBQUE7O2dKQUVmOztjQUFLLFVBQVUsTUFBSyxRQUFRLEtBQzVCO2NBQUssV0FBVyxNQUFLLFNBQVMsS0FBOUI7ZUFDSDs7Ozs7aUNBRVE7eUJBQUE7O2dCQUNBLFdBQVksS0FBSyxNQUN0QjtBQUVBOztnQkFBSSxnQkFBZ0IseUJBQUk7NEJBRVksT0FBSztvQkFBaEM7b0JBQVksbUJBRWpCOztvQkFBRyxhQUFhLGFBQWEsZUFBZSxXQUN4QzsyQ0FBUSw2Q0FBaUIsSUFBRztzQ0FBckI7d0NBQ1Y7QUFEVTtxQkFBQTtBQURYLHVCQUVNLElBQUcsZUFBZSxXQUFVO3dCQUN6QixXQUFZLFdBQVcsS0FBSyxnQkFBZ0IsS0FDakQ7OzZCQUFTLFFBQ1o7QUFFRDs7b0JBQUcsZUFBZSxXQUFVO3dCQUNuQixXQUFZLFdBQVcsS0FBSyxnQkFBZ0IsS0FFakQ7OzZCQUNIO0FBQ0Q7dUNBQVEsNkNBQWlCLElBQUc7a0NBQXJCO29DQUNWO0FBRFU7aUJBQUE7QUFHWDs7Z0JBQUksYUFBYSxzQkFDYjtvQkFBRyxhQUFhLGFBQWEsU0FBUyxTQUFTLEdBQUk7QUFDL0M7MkNBQ0k7O3NDQUFBO3dDQUNJO0FBREo7QUFBQSx1Q0FDSSxzQkFBSSxXQUFVO3NDQUFkO3dDQUFzQjtBQUF0Qjt1Q0FBdUIsNkNBQWlCLElBQUcscUJBQW9CLFFBQVEsRUFBQyxVQUFXLFNBQVM7c0NBQXRFO3dDQUN0QjtBQURzQjt5Q0FDdEIsMEJBQVEsV0FBVSxtQkFBa0IsU0FBUyxPQUFLO3NDQUFsRDt3Q0FBNEQ7QUFBNUQ7dUNBQTZELDZDQUFpQixJQUFHO3NDQUFyQjt3Q0FHdkU7QUFIdUU7O0FBS3hFOztBQUVBOzt1Q0FDSTs7a0NBQUE7b0NBQ0k7QUFESjtBQUFBLG1DQUNJLHNCQUFJLFdBQVU7a0NBQWQ7b0NBQXNCO0FBQXRCO21DQUF1Qiw2Q0FBaUIsSUFBRztrQ0FBckI7b0NBQ3RCO0FBRHNCO3FDQUN0Qix3QkFBTSxVQUFVLE9BQUs7a0NBQXJCO29DQUNJO0FBREo7bUNBQ0ssbUNBQVEsT0FBTSxjQUFhLEtBQUksY0FBYSxTQUFRLFlBQVcsTUFBSyxRQUFPLFdBQVU7a0NBQXRGO29DQUNBO0FBREE7b0NBQ0MsbUNBQVEsT0FBTSxjQUFhLEtBQUksY0FBYSxTQUFRLFlBQVcsTUFBSyxZQUFXLFdBQVU7a0NBQTFGO29DQUNBO0FBREE7b0NBQ0MsbUNBQVEsTUFBSyxVQUFTLFdBQVUsbUJBQWtCLE9BQU07a0NBQXpEO29DQUVIO0FBRkc7cUJBS2Y7QUFDRDttQ0FDSTs7OEJBQUE7Z0NBQ0s7QUFETDtBQUFBLGVBSVA7Ozs7Z0NBQ08sR0FDSjtjQUNBO0FBQ0E7QUFITTtnQkFJRCxXQUFhLEtBQUssTUFBbEI7eUJBQzBCLEtBQUs7Z0JBQS9CO2dCQUFXLG9CQUNoQjtBQUNBO0FBUE07O2dCQVFELFdBQVksV0FBVyxLQUFLLGdCQUFnQixLQUE1QztnQkFDQSxXQUFZLFdBQVcsS0FBSyxnQkFBZ0IsS0FFakQ7O0FBQ0E7QUFDQTs7Z0JBQUcsU0FBUyxNQUFNLFNBQVMsS0FBSyxTQUFTLE1BQU0sU0FBUyxHQUNwRDtBQUNBO3lCQUFTLG1CQUFTLFdBQVcsU0FBUyxPQUFPLFNBQ2hEO0FBSEQsbUJBSUk7QUFDQTt5QkFDQTt5QkFBUyxRQUNaO0FBQ0o7Ozs7aUNBQ1EsR0FDTDtjQUNBO0FBRk87Z0JBR0YsV0FBYSxLQUFLLE1BQ3ZCOztxQkFBUyxtQkFDWjs7Ozs7QUFHTDs7MkNBQXVCO1dBQU87QUFBZixHQUFzQixXIiwiZmlsZSI6ImJ1bmRsZXNcXHBhZ2VzXFxsb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9sYXlvdXQnO1xyXG5pbXBvcnQge2luaXRTdG9yZX0gZnJvbSAnLi4vc3RvcmUvc3RvcmUnO1xyXG5pbXBvcnQgd2l0aFJlZHV4IGZyb20gJ25leHQtcmVkdXgtd3JhcHBlcic7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG5pbXBvcnQgTG9naW5Gb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvbG9naW5Gb3JtJ1xyXG5cclxuY2xhc3MgTG9naW4gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB7bGFuZywgdXNlckluZm99ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ2xvZ2luLT4gbGFuZyAtPiB0aGUgdXNlcjonLGxhbmcsIHVzZXJJbmZvLCB1c2VySW5mbyAhPT0gdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBoZWxsbyA9IGxhbmcgPT09IFwiemhcIj8gdXNlckluZm8udXNlck5hbWUgKyBcIuaCqOWlvVwiOiBcIkhlbGxvIFwiICsgdXNlckluZm8udXNlck5hbWVcclxuICAgICAgICBjb25zdCB2ZXJpZnkgPSBsYW5nID09PSBcInpoXCI/IFwi57O757uf6aqM6K+BXCIgOiBcIlZlcmlmaWNhdGlvblwiXHJcbiAgICAgICAgY29uc3Qgd2VsY29tZSA9IGxhbmcgPT09IFwiemhcIj8gXCLpqozor4HpgJrov4fvvIzmrKLov47lm57mnaXvvIFcIjogXCJXZWxjb21lIGJhY2tcIlxyXG4gICAgICAgIGNvbnN0IG5lZWRWZXJpZnkgPSBsYW5nID09PSBcInpoXCI/IFwi6K+36L6T5YWl55So5oi35ZCN5a+G56CB6L+b6KGM6aqM6K+BXCI6XCJQbGVhc2UgaW5wdXQgdXNlciBuYW1lIGFuZCBwYXNzd29yZFwiIFxyXG5cclxuICAgICAgICBsZXQgbG9nZ2VkSW4gPSAodXNlckluZm8gIT09IHVuZGVmaW5lZCAmJiB1c2VySW5mby51c2VySWQgPiAwKVxyXG4gICAgICAgIGxldCB0aXRsZSA9IGxvZ2dlZEluID8gaGVsbG8gOiB2ZXJpZnlcclxuICAgICAgICBsZXQgc3ViVGl0bGUgPSBsb2dnZWRJbiA/IHdlbGNvbWU6IG5lZWRWZXJpZnlcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0xvZ2luLT5sb2dnZWRJbix0aXRsZSxzdWJUaXRsZTonLGxvZ2dlZEluLCB0aXRsZSwgc3ViVGl0bGUpXHJcblxyXG4gICAgICAgIGxldCByZW5kZXJMb2dpbiA9ICgpPT57XHJcbiAgICAgICAgICAgIGlmKGxvZ2dlZEluKXsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxkaXY+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjdXJyZW50VXNlclwiPjwvRm9ybWF0dGVkTWVzc2FnZT4gOiB7dXNlckluZm8udXNlck5hbWV9IDwvZGl2Pik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxMb2dpbkZvcm0gIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8TGF5b3V0IHRpdGxlPXt0aXRsZX0gc3ViVGl0bGU9e3N1YlRpdGxlfSBicmVhZGNydW1iPVwiTG9naW5cIj5cclxuICAgICAgICAgICAgICAgIHtyZW5kZXJMb2dpbigpfVxyXG4gICAgICAgICAgICA8L0xheW91dD4gICAgICAgICAgICBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoUmVkdXgoaW5pdFN0b3JlLChzdGF0ZSk9PntcclxuICAgIGNvbnNvbGUubG9nKCdsb2dpbi0+c3RhdGU6JyxzdGF0ZSk7XHJcbiAgICByZXR1cm4gc3RhdGVcclxufSkoTG9naW4pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3BhZ2VzL2xvZ2luLmpzP2VudHJ5IiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50LCBQcm9wVHlwZXN9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG5pbXBvcnQgbG9naW5BUEkgZnJvbSAnLi4vYXBpL2xvZ2luQVBJJztcclxuaW1wb3J0IElucHV0RXggZnJvbSAnLi9JbnB1dEV4JztcclxuXHJcbmNsYXNzIExvZ2luRm9ybSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLm9uTG9naW4gPSB0aGlzLm9uTG9naW4uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLm9uTG9nb3V0ID0gdGhpcy5vbkxvZ291dC5iaW5kKHRoaXMpOyAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHZhciB7dXNlckluZm99ID0gdGhpcy5wcm9wcztcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdsb2dpbkZvcm0udXNlckluZm86JywgdXNlckluZm8pO1xyXG5cclxuICAgICAgICB2YXIgcmVuZGVyTWVzc2FnZSA9ICgpPT57XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIge3VzZXJOYW1lRXgsIHBhc3N3b3JkRXh9ICA9IHRoaXMucmVmcztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKHVzZXJJbmZvID09PSB1bmRlZmluZWQgfHwgcGFzc3dvcmRFeCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHJldHVybig8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImxvZ2luUHJvbXB0XCIgLz4pO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihwYXNzd29yZEV4ICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHtwYXNzd29yZH0gPSBwYXNzd29yZEV4LnJlZnMud3JhcHBlZEluc3RhbmNlLnJlZnM7XHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZC52YWx1ZT0nJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYodXNlck5hbWVFeCAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHZhciB7dXNlck5hbWV9ID0gdXNlck5hbWVFeC5yZWZzLndyYXBwZWRJbnN0YW5jZS5yZWZzO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB1c2VyTmFtZS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4oPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJsb2dpbkZhaWxQcm9tcHRcIiAvPik7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciByZW5kZXJGb3JtID0gKCk9PntcclxuICAgICAgICAgICAgaWYodXNlckluZm8gIT09IHVuZGVmaW5lZCAmJiB1c2VySW5mby51c2VySWQgPiAwKXsgLy9BbHJlYWR5IGxvZ2dlZCBpblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuKFxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRpdGxlXCI+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9J2xvZ2luU3VjY2Vzc1RpdGxlJyB2YWx1ZXM9e3t1c2VyTmFtZSA6IHVzZXJJbmZvLnVzZXJOYW1lfX0vPjwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnV0dG9uIGV4cGFuZGVkXCIgb25DbGljaz17dGhpcy5vbkxvZ291dH0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJsb2dvdXRCdXR0b25cIi8+PC9idXR0b24+IFxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdmYWlsIGxvZ2luOicsIHVzZXJJbmZvKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybihcclxuICAgICAgICAgICAgICAgIDxkaXYgPiAgXHJcbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRpdGxlXCI+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9J2xvZ2luVGl0bGUnLz48L2gxPiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLm9uTG9naW59PiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRFeCBsb2NJZD1cInBoVXNlck5hbWVcIiByZWY9XCJ1c2VyTmFtZUV4XCIgcmVmTmFtZT1cInVzZXJOYW1lXCIgdHlwZT1cInRleHRcIiBjbGFzc05hbWU9XCJ0ZXh0XCIvPiAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRFeCBsb2NJZD1cInBoUGFzc3dvcmRcIiByZWY9XCJwYXNzd29yZEV4XCIgcmVmTmFtZT1cInBhc3N3b3JkXCIgdHlwZT1cInBhc3N3b3JkXCIgY2xhc3NOYW1lPVwicGFzc3dvcmRcIi8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEV4IHR5cGU9XCJzdWJtaXRcIiBjbGFzc05hbWU9XCJidXR0b24gZXhwYW5kZWRcIiBsb2NJZD1cImxvZ2luQnV0dG9uXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAge3JlbmRlck1lc3NhZ2UoKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApOyAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICB7cmVuZGVyRm9ybSgpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgb25Mb2dpbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbG9naW4ucHJvcHM6Jyx0aGlzLnByb3BzKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwidGhlIHN0YXRlOlwiLCB0aGlzLnJlZnMud3JhcHBlZEluc3RhbmNlKTtcclxuICAgICAgICB2YXIge2Rpc3BhdGNofSAgPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHZhciB7dXNlck5hbWVFeCxwYXNzd29yZEV4fSAgPSB0aGlzLnJlZnM7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndXNlck5hbWVFeCwgcGFzc3dvcmRFeDonLCB1c2VyTmFtZUV4LCBwYXNzd29yZEV4KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCdJbnB1dEV4LnJlZnM6JywgdXNlck5hbWVFeC52YWx1ZSk7XHJcbiAgICAgICAgdmFyIHt1c2VyTmFtZX0gPSB1c2VyTmFtZUV4LnJlZnMud3JhcHBlZEluc3RhbmNlLnJlZnM7XHJcbiAgICAgICAgdmFyIHtwYXNzd29yZH0gPSBwYXNzd29yZEV4LnJlZnMud3JhcHBlZEluc3RhbmNlLnJlZnM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygndXNlck5hbWU6JywgdXNlck5hbWUudmFsdWUpXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygncGFzc3dvcmQ6JywgcGFzc3dvcmQudmFsdWUpO1xyXG4gICAgICAgIGlmKHVzZXJOYW1lLnZhbHVlLmxlbmd0aCA+IDAgJiYgcGFzc3dvcmQudmFsdWUubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3RyeSBsb2dpbicpXHJcbiAgICAgICAgICAgIGRpc3BhdGNoKGxvZ2luQVBJLnZlcmlmeVVzZXIodXNlck5hbWUudmFsdWUsIHBhc3N3b3JkLnZhbHVlKSlcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnbG9naW4gZmFpbGVkJyk7XHJcbiAgICAgICAgICAgIHVzZXJOYW1lLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIHBhc3N3b3JkLnZhbHVlID0gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbkxvZ291dChlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygnbG9nb3V0Jyk7XHJcbiAgICAgICAgdmFyIHtkaXNwYXRjaH0gID0gdGhpcy5wcm9wcztcclxuICAgICAgICBkaXNwYXRjaChsb2dpbkFQSS5sb2dPdXQoKSk7ICAgICAgICBcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChzdGF0ZT0+c3RhdGUpKExvZ2luRm9ybSk7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvbG9naW5Gb3JtLmpzIl0sInNvdXJjZVJvb3QiOiIifQ=="}